{% macro summary(page) %}
<div class="flex flex-col sm:flex-row gap-4 pb-2">
  {% if page.extra.preview %}
  <div class="sm:w-1/4">
    <img src="{{ page.extra.preview }}" alt="{{ page.title }}" class="rounded w-full h-auto object-cover">
  </div>
  {% endif %}
  
  <div class="flex-1">
    <h3 class="text-lg font-bold">{{ page.title }}</h3>
    <div class="text-gray-700 mb-1">
      {% set site_author_full = config.title %}
      {% set authors_text = page.extra.authors %}
      
      {# 将作者姓名解析为名和姓 #}
      {% set author_first = site_author_full | split(pat=" ") | first %}
      {% set author_last = site_author_full | split(pat=" ") | last %}
      
      {# 替换名字为高亮版本 - 处理两种常见格式 #}
      {% set highlighted_text = authors_text | replace(from=site_author_full, to='<span class="font-bold text-blue-600">' ~ site_author_full ~ '</span>') %}
      {% set highlighted_text = highlighted_text | replace(from=author_last ~ ", " ~ author_first, to='<span class="font-bold text-blue-600">' ~ author_last ~ ", " ~ author_first ~ '</span>') %}
      
      {{ highlighted_text | safe }}
    </div>
    <div class="italic mb-2">{{ page.extra.journal_info | default(value=page.extra.venue) }}, {{ page.extra.year }}</div>
    
    <div class="flex flex-wrap gap-2">
      {% if page.extra.pdf %}
      <a href="{{ page.extra.pdf }}" class="text-blue-600 hover:text-blue-800 bg-blue-100 hover:bg-blue-200 px-2 py-1 rounded text-sm transition-colors">
        PDF
      </a>
      {% endif %}
      
      {% if page.extra.code %}
      <a href="{{ page.extra.code }}" class="text-green-600 hover:text-green-800 bg-green-100 hover:bg-green-200 px-2 py-1 rounded text-sm transition-colors">
        Code
      </a>
      {% endif %}
      
      {% if page.extra.project %}
      <a href="{{ page.extra.project }}" class="text-purple-600 hover:text-purple-800 bg-purple-100 hover:bg-purple-200 px-2 py-1 rounded text-sm transition-colors">
        Project
      </a>
      {% endif %}
      
      {% if page.extra.slides %}
      <a href="{{ page.extra.slides }}" class="text-orange-600 hover:text-orange-800 bg-orange-100 hover:bg-orange-200 px-2 py-1 rounded text-sm transition-colors">
        Slides
      </a>
      {% endif %}
      
      {% if page.extra.bibtex_show %}
      <button onclick="toggleBibtex('bibtex-{{ page.slug | slugify }}')" class="text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-sm transition-colors">
        BibTeX
      </button>
      {% endif %}
    </div>
    
    {% if page.extra.bibtex_show %}
    <div id="bibtex-{{ page.slug | slugify }}" class="hidden mt-2 p-2 bg-gray-100 dark:bg-gray-800 rounded overflow-auto">
      <pre class="text-xs">{{ page.extra.bibtex | safe }}</pre>
    </div>
    {% endif %}
  </div>
</div>
{% endmacro %}