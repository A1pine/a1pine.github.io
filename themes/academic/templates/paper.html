{% extends "base.html" %}

{% block content %}
<article class="max-w-4xl mx-auto">
    <header class="mb-8">
        <h1 class="text-3xl font-bold mb-4">{{ page.title }}</h1>
        
        <div class="flex items-start space-x-6">
            {% if page.extra.image %}
            <div class="flex-shrink-0">
                <img src="{{ page.extra.image }}" alt="{{ page.title }}" class="w-48 rounded-lg">
            </div>
            {% endif %}
            
            <div class="flex-grow">
                <p class="text-lg mb-2">
                    {% set site_author_full = config.title %}
                    {% set authors_text = page.extra.authors %}
                    
                    {# 将作者姓名解析为名和姓 #}
                    {% set author_first = site_author_full | split(pat=" ") | first %}
                    {% set author_last = site_author_full | split(pat=" ") | last %}
                    
                    {# 替换名字为高亮版本 - 处理两种常见格式 #}
                    {% set highlighted_text = authors_text | replace(from=site_author_full, to='<span class="font-bold text-blue-600">' ~ site_author_full ~ '</span>') %}
                    {% set highlighted_text = highlighted_text | replace(from=author_last ~ ", " ~ author_first, to='<span class="font-bold text-blue-600">' ~ author_last ~ ", " ~ author_first ~ '</span>') %}
                    
                    {{ highlighted_text | safe }}
                </p>
                <p class="italic mb-4">{{ page.extra.venue }}</p>
                
                {% if page.extra.award %}
                <p class="text-blue-600">
                    ★ {{ page.extra.award }}
                </p>
                {% endif %}
                
                {% if page.extra.pdf %}
                <div class="mt-4">
                    <a href="{{ page.extra.pdf }}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        Download PDF
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </header>

    <div class="prose max-w-none">
        {{ page.content | safe }}
    </div>
</article>
{% endblock content %}
